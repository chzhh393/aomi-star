<!--pages/candidate/home/home.wxml-->
<!--å€™é€‰äººå·¥ä½œå° - è¡—å¤´è¿åŠ¨é£æ ¼-->
<view class="container">

  <!-- é¡¶éƒ¨æ¨ªå¹… -->
  <view class="header-banner">
    <view class="banner-slash"></view>
    <text class="banner-text">CANDIDATE</text>
    <text class="banner-subtitle">ä¸»æ’­å€™é€‰äºº</text>
  </view>

  <!-- çŠ¶æ€å¡ç‰‡ -->
  <view class="status-card">
    <view class="status-icon-wrapper">
      <text class="status-icon">{{statusInfo.title.includes('æˆåŠŸ') || statusInfo.title.includes('é€šè¿‡') ? 'âœ…' : statusInfo.title.includes('é—æ†¾') ? 'âŒ' : 'â³'}}</text>
    </view>
    <view class="status-title">{{statusInfo.title}}</view>
    <view class="status-desc">{{statusInfo.desc}}</view>
  </view>

  <!-- è¿›åº¦æ¡ -->
  <view class="progress-block">
    <view class="block-label">
      <view class="label-slash"></view>
      <text class="label-text">PROGRESS</text>
    </view>

    <view class="progress-steps">
      <block wx:for="{{statusSteps}}" wx:key="key">
        <view class="step-item {{currentStep >= index + 1 ? 'active' : ''}}">
          <view class="step-icon-box">
            <text class="step-icon">{{item.icon}}</text>
          </view>
          <text class="step-label">{{item.label}}</text>
        </view>
        <view class="step-line" wx:if="{{index < statusSteps.length - 1}}">
          <view class="step-line-fill {{currentStep > index + 1 ? 'active' : ''}}"></view>
        </view>
      </block>
    </view>
  </view>

  <!-- å®¡æ ¸ä¿¡æ¯ -->
  <view class="review-block" wx:if="{{candidate.hrReview}}">
    <view class="block-label">
      <view class="label-slash"></view>
      <text class="label-text">REVIEW INFO</text>
    </view>

    <view class="review-item">
      <view class="review-label">å®¡æ ¸æ„è§</view>
      <view class="review-value">{{candidate.hrReview.comment}}</view>
    </view>

    <view class="review-item" wx:if="{{candidate.hrReview.suggestedSalary}}">
      <view class="review-label">å»ºè®®è–ªèµ„</view>
      <view class="review-value">{{candidate.hrReview.suggestedSalary}}</view>
    </view>

    <view class="review-item" wx:if="{{candidate.hrReview.interviewDate}}">
      <view class="review-label">é¢è¯•æ—¶é—´</view>
      <view class="review-value">{{candidate.hrReview.interviewDate}}</view>
    </view>

    <view class="review-item">
      <view class="review-label">å®¡æ ¸äºº</view>
      <view class="review-value">{{candidate.hrReview.reviewerName}}</view>
    </view>

    <view class="review-item">
      <view class="review-label">å®¡æ ¸æ—¶é—´</view>
      <view class="review-value">{{candidate.hrReview.reviewAt}}</view>
    </view>
  </view>

  <!-- å¿«æ·æ“ä½œ -->
  <view class="actions-block">
    <!-- æ ¹æ®çŠ¶æ€æ˜¾ç¤ºæ“ä½œæŒ‰é’® -->
    <button
      class="action-btn btn-primary"
      wx:if="{{statusInfo.action}}"
      bindtap="{{statusInfo.action.handler}}"
    >
      <text class="btn-text">{{statusInfo.action.text}} â†’</text>
    </button>

    <view class="action-row">
      <button class="action-btn btn-secondary" bindtap="viewDetails">
        <text class="btn-text">æŸ¥çœ‹è¯¦æƒ…</text>
      </button>

      <button class="action-btn btn-secondary" bindtap="contactHR">
        <text class="btn-text">è”ç³»HR</text>
      </button>
    </view>

    <button class="action-btn btn-ghost" bindtap="onRefresh">
      <text class="btn-text">åˆ·æ–°çŠ¶æ€</text>
    </button>
  </view>

  <!-- æ¸©é¦¨æç¤º -->
  <view class="tips-block">
    <view class="tip-item" wx:if="{{candidate.status === 'pending'}}">
      <text class="tip-icon">ğŸ“‹</text>
      <text class="tip-text">å®¡æ ¸æœŸé—´å¯éšæ—¶æŸ¥çœ‹è¿›åº¦ï¼Œæ— éœ€é‡å¤æäº¤</text>
    </view>
    <view class="tip-item" wx:if="{{candidate.status === 'interview_scheduled'}}">
      <text class="tip-icon">ğŸ’¡</text>
      <text class="tip-text">è¯·å°½å¿«å®Œæˆåœ¨çº¿æµ‹è¯•ï¼Œå®Œæˆåç­‰å¾…é¢è¯•</text>
    </view>
    <view class="tip-item" wx:if="{{candidate.status === 'online_test_completed' || candidate.status === 'pending_rating'}}">
      <text class="tip-icon">â³</text>
      <text class="tip-text">é¢è¯•å®˜æ­£åœ¨è¯„ä»·ä¸­ï¼Œè¯·è€å¿ƒç­‰å¾…</text>
    </view>
    <view class="tip-item" wx:if="{{candidate.status === 'rated'}}">
      <text class="tip-icon">ğŸ‰</text>
      <text class="tip-text">æ­å–œé€šè¿‡è¯„çº§ï¼ç»çºªäººå°†è”ç³»æ‚¨ç­¾çº¦</text>
    </view>
    <view class="tip-item" wx:if="{{candidate.status === 'signed'}}">
      <text class="tip-icon">ğŸ‘</text>
      <text class="tip-text">æ¬¢è¿åŠ å…¥ï¼ç‚¹å‡»æŒ‰é’®è¿›å…¥ä¸»æ’­å·¥ä½œå°</text>
    </view>
  </view>

</view>
