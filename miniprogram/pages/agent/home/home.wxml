<!--
  ç»çºªäººå·¥ä½œå°
  åŠŸèƒ½:
  1. æŸ¥çœ‹å¾…ç­¾çº¦å€™é€‰äºº(status=rated)
  2. æŸ¥çœ‹å·²ç­¾çº¦ä¸»æ’­
  3. é¢è¯•è¯„ä»·å…¥å£
  4. åˆåŒä¸Šä¼ å…¥å£
-->
<view class="agent-home">
  <!-- é¡¶éƒ¨ç”¨æˆ·ä¿¡æ¯ -->
  <view class="header">
    <view class="user-info">
      <text class="role-badge">ğŸŒŸ ç»çºªäºº</text>
      <text class="username">{{userInfo.profile.name}}</text>
    </view>
  </view>

  <!-- æ•°æ®ç»Ÿè®¡å¡ç‰‡ -->
  <view class="stats-section">
    <view class="stats-card">
      <view class="stat-item primary">
        <text class="stat-value">{{stats.totalManaged}}</text>
        <text class="stat-label">ç®¡ç†æ€»æ•°</text>
      </view>
      <view class="stat-item">
        <text class="stat-value">{{stats.pendingContract}}</text>
        <text class="stat-label">å¾…ç­¾çº¦</text>
      </view>
      <view class="stat-item">
        <text class="stat-value">{{stats.pendingEvaluation}}</text>
        <text class="stat-label">å¾…è¯„ä»·</text>
      </view>
      <view class="stat-item">
        <text class="stat-value">{{stats.signed}}</text>
        <text class="stat-label">å·²ç­¾çº¦</text>
      </view>
    </view>
  </view>

  <!-- å¾…è¯„ä»·å€™é€‰äººåˆ—è¡¨ -->
  <view class="tasks-section" wx:if="{{pendingEvaluationCandidates.length > 0}}">
    <view class="section-header">
      <text class="section-title">å¾…è¯„ä»·å€™é€‰äºº</text>
      <text class="section-count">{{pendingEvaluationCandidates.length}}</text>
    </view>

    <view class="candidate-list">
      <view
        wx:for="{{pendingEvaluationCandidates}}"
        wx:key="id"
        class="candidate-card urgent"
      >
        <view class="candidate-header">
          <view class="candidate-info">
            <text class="candidate-name">{{item.basicInfo.name}}</text>
            <text class="candidate-id">ID: {{item.id}}</text>
          </view>
          <view class="urgent-badge">
            <text class="badge-text">å¾…è¯„ä»·</text>
          </view>
        </view>

        <view class="candidate-details">
          <view class="detail-item">
            <text class="detail-label">çŠ¶æ€ï¼š</text>
            <text class="detail-value">å·²å®Œæˆçº¿ä¸Šæµ‹è¯•</text>
          </view>
          <view class="detail-item">
            <text class="detail-label">åŸºæœ¬ä¿¡æ¯ï¼š</text>
            <text class="detail-value">{{item.basicInfo.age}}å² / {{item.basicInfo.height}}cm</text>
          </view>
        </view>

        <view class="action-btn" catchtap="onEvaluateCandidate" data-id="{{item.id}}">
          <text class="btn-text">å»è¯„ä»· â†’</text>
        </view>
      </view>
    </view>
  </view>

  <!-- å¾…ç­¾çº¦å€™é€‰äººåˆ—è¡¨ -->
  <view class="tasks-section">
    <view class="section-header">
      <text class="section-title">å¾…ç­¾çº¦å€™é€‰äºº</text>
      <text class="section-count">{{pendingContractCandidates.length}}</text>
    </view>

    <view wx:if="{{pendingContractCandidates.length === 0}}" class="empty-state">
      <text class="empty-icon">âœ¨</text>
      <text class="empty-text">æš‚æ— å¾…ç­¾çº¦å€™é€‰äºº</text>
    </view>

    <view wx:else class="candidate-list">
      <view
        wx:for="{{pendingContractCandidates}}"
        wx:key="id"
        class="candidate-card"
        bindtap="onViewCandidate"
        data-id="{{item.id}}"
      >
        <view class="candidate-header">
          <view class="candidate-info">
            <text class="candidate-name">{{item.basicInfo.name}}</text>
            <text class="candidate-id">ID: {{item.id}}</text>
          </view>
          <view class="status-badge rated">
            <text class="badge-text">å·²è¯„çº§</text>
          </view>
        </view>

        <view class="candidate-details">
          <view class="detail-item">
            <text class="detail-label">ç»¼åˆè¯„åˆ†ï¼š</text>
            <text class="detail-value highlight">{{item.rating.finalScore}}åˆ†</text>
          </view>
          <view class="detail-item">
            <text class="detail-label">è¯„çº§ï¼š</text>
            <text class="detail-value highlight">{{item.rating.finalRating}}</text>
          </view>
          <view class="detail-item">
            <text class="detail-label">åŸºæœ¬ä¿¡æ¯ï¼š</text>
            <text class="detail-value">{{item.basicInfo.age}}å² / {{item.basicInfo.height}}cm</text>
          </view>
        </view>

        <view class="action-btn primary" catchtap="onSignContract" data-id="{{item.id}}">
          <text class="btn-text">å»ç­¾çº¦ â†’</text>
        </view>
      </view>
    </view>
  </view>

  <!-- æˆ‘çš„ä¸»æ’­åˆ—è¡¨(æœ€è¿‘5ä¸ª) -->
  <view class="completed-section">
    <view class="section-header">
      <text class="section-title">æˆ‘çš„ä¸»æ’­</text>
      <text class="section-count">{{stats.signed}}</text>
    </view>

    <view wx:if="{{signedStreamers.length === 0}}" class="empty-state">
      <text class="empty-icon">ğŸ‘¥</text>
      <text class="empty-text">æš‚æ— ç­¾çº¦ä¸»æ’­</text>
    </view>

    <view wx:else class="streamer-list">
      <view
        wx:for="{{signedStreamers}}"
        wx:key="id"
        class="streamer-card"
        bindtap="onViewStreamer"
        data-id="{{item.id}}"
      >
        <view class="streamer-header">
          <view class="streamer-info">
            <text class="streamer-name">{{item.basicInfo.name}}</text>
            <text class="streamer-id">ID: {{item.id}}</text>
          </view>
          <view class="live-status {{item.streamerInfo.liveStatus}}">
            <text class="status-text">{{item.liveStatusLabel}}</text>
          </view>
        </view>

        <view class="streamer-details">
          <view class="detail-row">
            <view class="detail-item">
              <text class="detail-label">åŸ¹è®­ï¼š</text>
              <text class="detail-value">{{item.trainingStatusLabel}}</text>
            </view>
            <view class="detail-item">
              <text class="detail-label">è¿›åº¦ï¼š</text>
              <text class="detail-value">{{item.streamerInfo.trainingProgress}}%</text>
            </view>
          </view>
          <view class="detail-row">
            <view class="detail-item">
              <text class="detail-label">åº•è–ªï¼š</text>
              <text class="detail-value highlight">{{item.streamerInfo.salary}}å…ƒ/æœˆ</text>
            </view>
            <view class="detail-item">
              <text class="detail-label">ææˆï¼š</text>
              <text class="detail-value highlight">{{item.streamerInfo.commission}}%</text>
            </view>
          </view>
        </view>
      </view>
    </view>
  </view>

  <!-- å¿«æ·åŠŸèƒ½ -->
  <view class="quick-actions">
    <view class="action-item" bindtap="onRefresh">
      <text class="action-icon">ğŸ”„</text>
      <text class="action-text">åˆ·æ–°åˆ—è¡¨</text>
    </view>
  </view>
</view>
