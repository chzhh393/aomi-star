<!--pages/recruit/status/status.wxml-->
<!--æŠ¥åçŠ¶æ€é¡µ - è¡—å¤´è¿åŠ¨é£æ ¼-->
<view class="container" wx:if="{{!loading && candidate}}">

  <!-- é¡¶éƒ¨æ¨ªå¹… -->
  <view class="header-banner">
    <view class="banner-slash"></view>
    <text class="banner-text">CANDIDATE</text>
    <text class="banner-subtitle">ä¸»æ’­å€™é€‰äºº</text>
  </view>

  <!-- çŠ¶æ€å¡ç‰‡ -->
  <view class="status-card">
    <view class="status-icon-wrapper">
      <text class="status-icon">{{statusInfo.title.includes('æˆåŠŸ') || statusInfo.title.includes('é€šè¿‡') || statusInfo.title.includes('æ­å–œ') ? 'âœ…' : statusInfo.title.includes('é—æ†¾') ? 'âŒ' : 'â³'}}</text>
    </view>
    <view class="status-title">{{statusInfo.title}}</view>
    <view class="status-desc">{{statusInfo.desc}}</view>
  </view>

  <!-- è¿›åº¦æ¡ -->
  <view class="progress-block">
    <view class="block-label">
      <view class="label-slash"></view>
      <text class="label-text">PROGRESS</text>
    </view>

    <view class="progress-steps">
      <block wx:for="{{statusSteps}}" wx:key="key">
        <view class="step-item {{currentStep >= index + 1 ? 'active' : ''}}">
          <view class="step-icon-box">
            <text class="step-icon">{{item.icon}}</text>
          </view>
          <text class="step-label">{{item.label}}</text>
        </view>
        <view class="step-line" wx:if="{{index < statusSteps.length - 1}}">
          <view class="step-line-fill {{currentStep > index + 1 ? 'active' : ''}}"></view>
        </view>
      </block>
    </view>
  </view>

  <!-- å®¡æ ¸ä¿¡æ¯ -->
  <view class="review-block" wx:if="{{candidate.hrReview}}">
    <view class="block-label">
      <view class="label-slash"></view>
      <text class="label-text">REVIEW INFO</text>
    </view>

    <view class="review-item">
      <view class="review-label">å®¡æ ¸æ„è§</view>
      <view class="review-value">{{candidate.hrReview.comment}}</view>
    </view>

    <view class="review-item" wx:if="{{candidate.hrReview.suggestedSalary}}">
      <view class="review-label">å»ºè®®è–ªèµ„</view>
      <view class="review-value">{{candidate.hrReview.suggestedSalary}}</view>
    </view>

    <view class="review-item" wx:if="{{candidate.hrReview.interviewDate}}">
      <view class="review-label">é¢è¯•æ—¶é—´</view>
      <view class="review-value">{{candidate.hrReview.interviewDate}}</view>
    </view>

    <view class="review-item" wx:if="{{candidate.hrReview.reviewerName}}">
      <view class="review-label">å®¡æ ¸äºº</view>
      <view class="review-value">{{candidate.hrReview.reviewerName}}</view>
    </view>

    <view class="review-item" wx:if="{{candidate.hrReview.reviewAt}}">
      <view class="review-label">å®¡æ ¸æ—¶é—´</view>
      <view class="review-value">{{candidate.hrReview.reviewAt}}</view>
    </view>
  </view>

  <!-- é¢è¯•ä¿¡æ¯ -->
  <view class="interview-block" wx:if="{{candidate.interview && candidate.status === 'interview_scheduled'}}">
    <view class="interview-title">é¢è¯•ä¿¡æ¯</view>
    <view class="interview-card">
      <view class="interview-row">
        <text class="interview-icon">ğŸ“…</text>
        <view class="interview-info">
          <view class="interview-label">é¢è¯•æ—¥æœŸ</view>
          <view class="interview-value">{{candidate.interview.date}}</view>
        </view>
      </view>

      <view class="interview-row">
        <text class="interview-icon">ğŸ•</text>
        <view class="interview-info">
          <view class="interview-label">é¢è¯•æ—¶é—´</view>
          <view class="interview-value">{{candidate.interview.time}}</view>
        </view>
      </view>

      <view class="interview-row" wx:if="{{candidate.interview.location}}">
        <text class="interview-icon">ğŸ“</text>
        <view class="interview-info">
          <view class="interview-label">é¢è¯•åœ°ç‚¹</view>
          <view class="interview-value">{{candidate.interview.location}}</view>
        </view>
      </view>

      <view class="interview-row" wx:if="{{candidate.interview.interviewers.length > 0}}">
        <text class="interview-icon">ğŸ‘¤</text>
        <view class="interview-info">
          <view class="interview-label">é¢è¯•å®˜</view>
          <view class="interview-value">{{candidate.interview.interviewers.join('ã€')}}</view>
        </view>
      </view>

      <view class="interview-row" wx:if="{{candidate.interview.notes}}">
        <text class="interview-icon">ğŸ“</text>
        <view class="interview-info">
          <view class="interview-label">å¤‡æ³¨</view>
          <view class="interview-value">{{candidate.interview.notes}}</view>
        </view>
      </view>
    </view>
  </view>

  <!-- å¿«æ·æ“ä½œ -->
  <view class="actions-block">
    <view class="action-row">
      <button class="action-btn btn-secondary" bindtap="viewDetail">
        <text class="btn-text">æŸ¥çœ‹è¯¦æƒ…</text>
      </button>

      <button class="action-btn btn-ghost" bindtap="onRefresh">
        <text class="btn-text">åˆ·æ–°çŠ¶æ€</text>
      </button>
    </view>
  </view>

  <!-- æ¸©é¦¨æç¤º -->
  <view class="tips-block">
    <view class="tip-item" wx:if="{{candidate.status === 'pending'}}">
      <text class="tip-icon">ğŸ“‹</text>
      <text class="tip-text">å®¡æ ¸æœŸé—´å¯éšæ—¶æŸ¥çœ‹è¿›åº¦ï¼Œæ— éœ€é‡å¤æäº¤</text>
    </view>
    <view class="tip-item" wx:if="{{candidate.status === 'approved'}}">
      <text class="tip-icon">ğŸ‰</text>
      <text class="tip-text">å®¡æ ¸å·²é€šè¿‡ï¼ŒHRå°†å°½å¿«ä¸ºæ‚¨å®‰æ’é¢è¯•ï¼Œè¯·ä¿æŒæ‰‹æœºç•…é€š</text>
    </view>
    <view class="tip-item" wx:if="{{candidate.status === 'interview_scheduled'}}">
      <text class="tip-icon">ğŸ’¡</text>
      <text class="tip-text">è¯·æŒ‰æ—¶å‚åŠ é¢è¯•ï¼Œæå‰åšå¥½å‡†å¤‡</text>
    </view>
    <view class="tip-item" wx:if="{{candidate.status === 'signed'}}">
      <text class="tip-icon">ğŸ‘</text>
      <text class="tip-text">æ¬¢è¿åŠ å…¥ï¼ç‚¹å‡»æŒ‰é’®è¿›å…¥ä¸»æ’­å·¥ä½œå°</text>
    </view>
  </view>

</view>

<!-- åŠ è½½ä¸­ -->
<view class="empty-state" wx:if="{{loading}}">
  <text class="empty-text">åŠ è½½ä¸­...</text>
</view>
