# 🌟 系统总览

> Aomi Star 项目的整体架构和设计思路

## 📋 项目简介

Aomi Star 是一个基于微信小程序的**直播主播全生命周期管理系统**，涵盖招聘、培训、运营、结算等10个业务阶段，服务13种不同角色用户。

## 🎯 技术选型决策

### 核心决策：纯小程序方案

**决策时间**：2025-11-06
**决策结果**：采用纯微信小程序方案，暂不开发Web管理后台

### 决策依据

#### 用户角色设备需求分析

系统服务13种角色，经过深入分析发现：

| 角色类型 | 角色数 | 主力设备 | 工作场景 |
|---------|-------|---------|---------|
| **100%手机办公** | 6个 | 📱 手机 | 训练室/直播间/化妆间 |
| **80%手机办公** | 2个 | 📱 手机为主 | 办公室+移动场景 |
| **需要电脑** | 2个 | 💻 电脑为主 | 固定办公 |

**关键发现**：
- 舞蹈导师、化妆师、搭配师、经纪人等核心角色是"现场服务型"或"游走型"，手机才是主力生产工具
- 直播公司工作环境不同于传统办公室，员工大量时间在训练室、直播间、化妆间等场地
- 仅超级管理员和财务专员需要电脑完成深度分析和审核工作

#### 成本优势

- **传统方案**（全员配电脑）：10人 × 6000元 = 60,000元
- **小程序方案**：仅需3-4台电脑 = 28,000元
- **节省成本**：32,000元（53%）

### 实施策略

**阶段一（3个月）**：纯小程序MVP
- 覆盖核心业务流程
- 重点优化移动端交互
- 真实用户测试验证

**阶段二（按需）**：根据MVP反馈决策
- 如小程序完全满足需求 → 不开发Web端
- 如有特定痛点 → 针对性补充Web功能

**核心原则**：移动优先，按需补充

### 技术优化方向

1. **交互设计优化**：卡片式布局、手势操作、语音输入
2. **AI辅助能力**：智能排班、自动对账、数据摘要
3. **投屏功能**：支持手机投屏到大屏幕
4. **云端处理**：复杂计算在云函数完成

**详细分析文档**：[技术选型决策记录](../dev-logs/2025-11/tech-decision-mobile-first-2025-11-06.md)

## 🏗️ 整体架构

### 架构图

```
┌────────────────────────────────────────────────────┐
│                   用户层                            │
│            (微信小程序客户端)                        │
└────────────────┬───────────────────────────────────┘
                 │
                 │ HTTPS
                 │
┌────────────────┴───────────────────────────────────┐
│                 小程序前端                           │
│  ┌──────────┐  ┌──────────┐  ┌──────────┐         │
│  │  Pages   │  │Components│  │  Utils   │         │
│  └──────────┘  └──────────┘  └──────────┘         │
│                                                     │
│  ┌──────────────────────────────────────┐         │
│  │         云开发 SDK                     │         │
│  └──────────────────────────────────────┘         │
└────────────────┬───────────────────────────────────┘
                 │
                 │ 云开发 API
                 │
┌────────────────┴───────────────────────────────────┐
│              微信云开发平台                          │
│  ┌──────────┐  ┌──────────┐  ┌──────────┐         │
│  │云函数    │  │云数据库  │  │云存储    │         │
│  │Cloud     │  │Database  │  │Storage   │         │
│  │Functions │  │          │  │          │         │
│  └──────────┘  └──────────┘  └──────────┘         │
└─────────────────────────────────────────────────────┘
```

## 🔄 技术架构

### 前端架构

采用微信小程序原生框架:

```
miniprogram/
├── pages/                 # 页面层
│   └── [page-name]/       # 各个页面
│       ├── *.js          # 页面逻辑
│       ├── *.json        # 页面配置
│       ├── *.wxml        # 页面结构
│       └── *.wxss        # 页面样式
│
├── components/            # 组件层
│   └── [component]/       # 自定义组件
│
├── utils/                 # 工具层
│   ├── api.js            # API 封装
│   ├── storage.js        # 存储工具
│   └── ...               # 其他工具
│
└── app.js                # 应用入口
```

### 后端架构

采用微信云开发:

```
cloudfunctions/
├── [function-name]/       # 云函数
│   ├── index.js          # 函数入口
│   ├── package.json      # 依赖配置
│   └── config.json       # 函数配置(可选)
```

## 📊 数据架构

### 数据库设计

使用微信云开发数据库(NoSQL文档型数据库):

```javascript
// 用户集合(users)
{
  _id: "user-id",
  _openid: "wx-openid",
  nickName: "用户昵称",
  avatarUrl: "头像URL",
  createTime: Date,
  updateTime: Date
}

// 其他集合(待设计)
```

### 本地存储

```javascript
// 用户信息
storage.set('userInfo', { ... })

// 应用配置
storage.set('appConfig', { ... })
```

## 🔐 安全设计

### 1. 身份认证

- 使用微信登录获取 OpenID
- 云函数自动鉴权
- Token 机制(待实现)

### 2. 数据权限

```javascript
// 云数据库权限设置
{
  "read": true,      // 所有人可读
  "write": "auth"    // 仅登录用户可写
}
```

### 3. 云函数安全

- 参数验证
- 权限检查
- 错误处理

## 📱 用户交互流程

### 1. 用户登录

```
用户点击登录
  ↓
调用 wx.login()
  ↓
获取 code
  ↓
调用云函数获取 openid
  ↓
保存用户信息
  ↓
跳转到主页
```

### 2. 数据获取

```
页面加载
  ↓
显示加载状态
  ↓
调用云函数/数据库
  ↓
处理返回数据
  ↓
更新页面显示
```

### 3. 数据提交

```
用户填写表单
  ↓
前端验证
  ↓
调用云函数
  ↓
云函数处理逻辑
  ↓
返回结果
  ↓
显示提示信息
```

## 🎨 设计原则

### 1. 模块化

- 功能模块独立
- 组件可复用
- 易于维护和扩展

### 2. 响应式

- 适配不同屏幕尺寸
- 良好的交互体验
- 流畅的动画效果

### 3. 性能优先

- 首屏快速加载
- 减少不必要的渲染
- 优化网络请求

### 4. 用户体验

- 简洁的界面
- 清晰的操作提示
- 友好的错误提示

## 🚀 核心功能模块

### 1. 用户模块(待开发)

- 用户登录
- 个人信息管理
- 用户设置

### 2. 主要业务模块(待设计)

[根据实际业务填写]

## 📈 性能指标

### 目标指标

- 首屏加载时间: < 2s
- 页面切换时间: < 500ms
- API 响应时间: < 1s

### 优化策略

1. **代码优化**
   - 按需加载
   - 代码分包
   - 减小包大小

2. **资源优化**
   - 图片压缩
   - 使用 CDN
   - 缓存策略

3. **网络优化**
   - 请求合并
   - 接口缓存
   - 预加载

## 🔮 技术演进

### 当前版本 (v1.0)

- 基础架构搭建
- 核心功能开发
- 文档体系建立

### 未来规划

#### v1.1
- 完善用户体系
- 增加核心功能
- 性能优化

#### v2.0
- 功能丰富
- 引入高级特性
- 支持更多场景

## 📚 相关文档

- [技术栈说明](./tech-stack.md)
- [数据流程](./data-flow.md)
- [快速开始](../guides/development/getting-started.md)
- [开发规范](../guides/development/code-standards.md)

## 💡 常见问题

### Q: 为什么选择原生小程序而不是框架?

A: 原生小程序性能最佳,文档完善,适合中小型项目快速开发。

### Q: 云开发的优势是什么?

A:
- 无需自建服务器
- 天然鉴权
- 开发效率高
- 成本低

### Q: 如何扩展功能?

A: 参考[模块文档](../modules/),按照规范创建新模块即可。

---

**最后更新**: 2025-11-01
**维护者**: 架构团队

> 💡 建议新人首先阅读本文档,了解项目整体架构!
