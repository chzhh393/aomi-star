# ğŸ“ Aomi Star ä»£ç è§„èŒƒ

> é¡¹ç›®ç‰¹å®šçš„ä»£ç çº¦å®šå’Œé£æ ¼æŒ‡å—

**åˆ›å»ºæ—¥æœŸ**: 2025-11-01
**æœ€åæ›´æ–°**: 2025-11-05
**ç»´æŠ¤è€…**: å¼€å‘å›¢é˜Ÿ

---

## ğŸ¯ è§„èŒƒæ¦‚è¿°

æœ¬æ–‡æ¡£å®šä¹‰ **Aomi Star é¡¹ç›®ç‰¹å®š** çš„ä»£ç è§„èŒƒå’Œçº¦å®šã€‚

**åˆ†å·¥è¯´æ˜**ï¼š
- æœ¬æ–‡æ¡£ - é¡¹ç›®ç‰¹å®šçš„çº¦å®šï¼ˆå‘½åã€æ–‡ä»¶ç»„ç»‡ã€æäº¤è§„èŒƒï¼‰
- [@Skills/miniprogram-dev](../../../.claude/skills/miniprogram-dev/SKILL.md) - å¾®ä¿¡å°ç¨‹åºå¼€å‘è¯¦ç»†è§„èŒƒï¼ˆä¼šè‡ªåŠ¨æ¿€æ´»ï¼‰
- [@å…¨å±€ CLAUDE.md](../../CLAUDE.md) - é€šç”¨å¼€å‘å“²å­¦å’Œæµç¨‹

---

## ğŸ“‚ é¡¹ç›®æ–‡ä»¶å‘½åçº¦å®š

### 1. é¡µé¢å’Œç»„ä»¶ç›®å½•

```bash
# âœ… æ­£ç¡®ï¼šå°å†™å­—æ¯ + è¿å­—ç¬¦
miniprogram/pages/candidate/register-info/
miniprogram/pages/hr/candidate-list/
miniprogram/components/common/user-card/

# âŒ é”™è¯¯ï¼šå¤§é©¼å³°æˆ–ä¸‹åˆ’çº¿
miniprogram/pages/candidate/RegisterInfo/
miniprogram/pages/hr/candidate_list/
```

**åŸå› **ï¼š
- å¾®ä¿¡å°ç¨‹åºè·¯å¾„åŒºåˆ†å¤§å°å†™ï¼Œå°å†™å¯é¿å…è·¯å¾„é”™è¯¯
- è¿å­—ç¬¦æ˜¯ Web æ ‡å‡†ï¼Œä¾¿äº URL ä½¿ç”¨
- ä¿æŒè·¨å¹³å°å…¼å®¹æ€§

### 2. JavaScript æ–‡ä»¶

```bash
# âœ… æ­£ç¡®ï¼šå°é©¼å³°
miniprogram/utils/roleManager.js
miniprogram/utils/sceneParser.js
miniprogram/services/userApi.js

# âŒ é”™è¯¯ï¼šè¿å­—ç¬¦æˆ–ä¸‹åˆ’çº¿
miniprogram/utils/role-manager.js
miniprogram/utils/scene_parser.js
```

**åŸå› **ï¼š
- JavaScript æ¨¡å—å¯¼å…¥æ—¶ä¸éœ€è¦å¼•å·
- ç¬¦åˆ Node.js å’Œå‰ç«¯ç¤¾åŒºæƒ¯ä¾‹
- ä¸å˜é‡å‘½åé£æ ¼ä¸€è‡´

### 3. äº‘å‡½æ•°ç›®å½•

```bash
# âœ… æ­£ç¡®ï¼šå°å†™å­—æ¯ + è¿å­—ç¬¦
cloudfunctions/get-user-info/
cloudfunctions/verify-invite-code/
cloudfunctions/update-candidate-status/

# âŒ é”™è¯¯ï¼šå°é©¼å³°æˆ–ä¸‹åˆ’çº¿
cloudfunctions/getUserInfo/
cloudfunctions/verify_invite_code/
```

**åŸå› **ï¼š
- äº‘å‡½æ•°åç§°ä¼šå‡ºç°åœ¨ URL è·¯å¾„ä¸­
- è¿å­—ç¬¦æ˜¯ RESTful API çš„æ ‡å‡†çº¦å®š
- ä¸é¡µé¢/ç»„ä»¶å‘½åé£æ ¼ç»Ÿä¸€

### 4. æ–‡æ¡£æ–‡ä»¶

```bash
# âœ… æ­£ç¡®ï¼šå¤§å†™å­—æ¯ + ä¸‹åˆ’çº¿ï¼ˆæ ¸å¿ƒæ–‡æ¡£ï¼‰
docs/CLAUDE.md
docs/PROJECT_KNOWLEDGE.md
docs/TROUBLESHOOTING.md

# âœ… æ­£ç¡®ï¼šå°å†™å­—æ¯ + è¿å­—ç¬¦ï¼ˆæ™®é€šæ–‡æ¡£ï¼‰
docs/guides/development/code-standards.md
docs/guides/business/workflows/login-flow.md

# âŒ é”™è¯¯ï¼šæ··ç”¨æˆ–ç©ºæ ¼
docs/Code Standards.md
docs/login_Flow.md
```

**åŸå› **ï¼š
- å¤§å†™æ ¸å¿ƒæ–‡æ¡£æ›´é†’ç›®ï¼Œä¾¿äºè¯†åˆ«
- å°å†™æ™®é€šæ–‡æ¡£ä¾¿äºè·¯å¾„å¼•ç”¨
- é¿å…ç©ºæ ¼å¯¼è‡´çš„è·¯å¾„é—®é¢˜

---

## ğŸ·ï¸ å˜é‡å’Œå‡½æ•°å‘½å

### 1. è§’è‰²ç›¸å…³å‘½åï¼ˆé¡¹ç›®ç‰¹å®šï¼‰

```javascript
// âœ… æ­£ç¡®ï¼šä½¿ç”¨å®Œæ•´å•è¯
const currentRole = 'candidate'      // å€™é€‰äºº
const streamerInfo = {}              // ä¸»æ’­
const employeeData = {}              // å‘˜å·¥

// è§’è‰²ç±»å‹å¸¸é‡
const ROLES = {
  CANDIDATE: 'candidate',
  STREAMER: 'anchor',                // æ³¨æ„ï¼šæ•°æ®åº“ä¸­æ˜¯ 'anchor'
  HR: 'hr',
  AGENT: 'agent',
  OPERATIONS: 'operations',
  TRAINER: 'dance-teacher',          // æ³¨æ„ï¼šä½¿ç”¨è¿å­—ç¬¦
  STYLIST: 'stylist',
  MAKEUP_ARTIST: 'makeup-artist',
  PHOTOGRAPHER: 'photographer',
  EXTERNAL_SCOUT: 'external-scout',
  ADMIN: 'admin'
}

// âŒ é”™è¯¯ï¼šä½¿ç”¨ç¼©å†™æˆ–ä¸ä¸€è‡´
const curRole = 'cand'
const anchorInfo = {}                // åº”è¯¥ç”¨ streamerInfo
const empData = {}
```

**åŸå› **ï¼š
- ä¿æŒæœ¯è¯­ä¸€è‡´æ€§ï¼ˆç³»ç»Ÿç»Ÿä¸€ç§°"å€™é€‰äºº"ä¸º candidateï¼Œ"ä¸»æ’­"ä¸º anchorï¼‰
- é¿å…ç¼©å†™å¯¼è‡´çš„æ­§ä¹‰
- ä¸æ•°æ®åº“å­—æ®µåç§°ä¸€è‡´

### 2. é¡µé¢æ•°æ®å‘½å

```javascript
Page({
  data: {
    // ç”¨æˆ·ç›¸å…³
    currentRole: '',           // å½“å‰è§’è‰²
    userId: '',                // ç”¨æˆ·ID
    userInfo: null,            // ç”¨æˆ·ä¿¡æ¯

    // é¡µé¢çŠ¶æ€ï¼ˆä½¿ç”¨ is/has å‰ç¼€ï¼‰
    isLoading: true,
    isRefreshing: false,
    hasMore: true,
    hasPermission: false,

    // è¡¨å•æ•°æ®ï¼ˆä½¿ç”¨ Data åç¼€ï¼‰
    formData: {},
    formErrors: {},

    // åˆ—è¡¨æ•°æ®ï¼ˆä½¿ç”¨ List åç¼€ï¼‰
    candidateList: [],
    interviewList: [],

    // UI çŠ¶æ€ï¼ˆä½¿ç”¨ show å‰ç¼€ï¼‰
    showModal: false,
    showTips: true,

    // é…ç½®é¡¹ï¼ˆç»Ÿä¸€æ”¾åœ¨ config å¯¹è±¡ä¸­ï¼‰
    config: {
      autoRefresh: true,
      refreshInterval: 30000
    }
  }
})
```

### 3. äº‘å‡½æ•°å‘½å

```javascript
// âœ… æ­£ç¡®ï¼šåŠ¨è¯ + åè¯
async function getUserInfo(userId) {}
async function createCandidate(data) {}
async function updateInterviewStatus(interviewId, status) {}
async function deleteReferralCode(codeId) {}
async function verifyInviteCode(code) {}

// âŒ é”™è¯¯ï¼šåªæœ‰åè¯æˆ–ä¸æ¸…æ™°
async function user(userId) {}
async function candidate(data) {}
async function interview(id) {}
```

---

## ğŸ“ æ³¨é‡Šè§„èŒƒ

### 1. æ–‡ä»¶å¤´æ³¨é‡Šï¼ˆä»…åœ¨å¤æ‚æ–‡ä»¶ä¸­ä½¿ç”¨ï¼‰

```javascript
/**
 * è§’è‰²ç®¡ç†å·¥å…·
 *
 * æä¾›è§’è‰²åˆ‡æ¢ã€æƒé™æ£€æŸ¥ç­‰åŠŸèƒ½
 *
 * @file miniprogram/utils/roleManager.js
 * @author å¼€å‘å›¢é˜Ÿ
 * @date 2025-11-05
 */
```

### 2. å‡½æ•°æ³¨é‡Šï¼ˆå…¬å…± API å¿…é¡»ï¼‰

```javascript
/**
 * è·å–å½“å‰ç”¨æˆ·çš„è§’è‰²
 *
 * @returns {Promise<string>} è§’è‰²æ ‡è¯†ï¼ˆå¦‚ 'candidate', 'anchor'ï¼‰
 * @throws {Error} å¦‚æœç”¨æˆ·æœªç™»å½•
 *
 * @example
 * const role = await roleManager.getCurrentRole()
 * // returns 'candidate'
 */
async function getCurrentRole() {
  // å®ç°...
}
```

### 3. ä»£ç æ³¨é‡Šï¼ˆè§£é‡Š"ä¸ºä»€ä¹ˆ"ï¼‰

```javascript
// âœ… æ­£ç¡®ï¼šè§£é‡ŠåŸå› æˆ–æ„å›¾
// ä½¿ç”¨é˜²æŠ–é¿å…é¢‘ç¹çš„äº‘å‡½æ•°è°ƒç”¨ï¼Œé™ä½è´¹ç”¨
const debouncedSearch = debounce(search, 300)

// å¿…é¡»å…ˆæ£€æŸ¥è§’è‰²ï¼Œå› ä¸ºä¸åŒè§’è‰²çœ‹åˆ°çš„æ•°æ®ä¸åŒ
await this.checkUserRole()

// âŒ é”™è¯¯ï¼šé‡å¤ä»£ç æœ¬èº«çš„æ„æ€
// å£°æ˜å˜é‡
let count = 0

// è°ƒç”¨å‡½æ•°
getUserInfo()
```

---

## ğŸ—‚ï¸ ä»£ç ç»„ç»‡

### 1. é¡µé¢ JS æ–‡ä»¶ç»“æ„é¡ºåº

```javascript
Page({
  // 1. æ•°æ®å®šä¹‰ï¼ˆæŒ‰ç±»å‹åˆ†ç»„ï¼‰
  data: {
    // ç”¨æˆ·ç›¸å…³
    currentRole: '',
    userId: '',

    // é¡µé¢çŠ¶æ€
    isLoading: true,

    // åˆ—è¡¨æ•°æ®
    candidateList: []
  },

  // 2. ç”Ÿå‘½å‘¨æœŸå‡½æ•°ï¼ˆæŒ‰è°ƒç”¨é¡ºåºï¼‰
  onLoad(options) {},
  onShow() {},
  onReady() {},
  onHide() {},
  onUnload() {},
  onPullDownRefresh() {},
  onReachBottom() {},
  onShareAppMessage() {},

  // 3. äº‹ä»¶å¤„ç†æ–¹æ³•ï¼ˆæŒ‰åŠŸèƒ½åˆ†ç»„ï¼Œç»„å†…æŒ‰å­—æ¯åºï¼‰
  // --- æ•°æ®åŠ è½½ ---
  async loadInitialData() {},
  async loadMoreData() {},

  // --- è¡¨å•å¤„ç† ---
  handleInput(e) {},
  handleSubmit(e) {},
  validateForm(data) {},

  // --- å¯¼èˆªè·³è½¬ ---
  navigateToDetail(e) {},
  navigateBack() {},

  // --- å·¥å…·æ–¹æ³• ---
  formatDate(date) {},
  showError(message) {}
})
```

### 2. äº‘å‡½æ•°æ–‡ä»¶ç»“æ„

```javascript
// cloudfunctions/[function-name]/index.js
const cloud = require('wx-server-sdk')
cloud.init({ env: cloud.DYNAMIC_CURRENT_ENV })

const db = cloud.database()
const _ = db.command

// ==================== ä¸»å‡½æ•° ====================

exports.main = async (event, context) => {
  const { action, data } = event
  const wxContext = cloud.getWXContext()

  try {
    // 1. å‚æ•°éªŒè¯
    // 2. æƒé™æ£€æŸ¥
    // 3. ä¸šåŠ¡é€»è¾‘
    // 4. è¿”å›ç»“æœ
  } catch (error) {
    return { success: false, message: error.message }
  }
}

// ==================== ä¸šåŠ¡é€»è¾‘å‡½æ•° ====================

async function getData() {}
async function createData() {}
async function updateData() {}
async function checkPermission() {}
```

---

## ğŸ”§ é¡¹ç›®ç‰¹å®šçš„é…ç½®

### ESLint é…ç½®

```json
{
  "env": {
    "es6": true,
    "node": true
  },
  "extends": "eslint:recommended",
  "rules": {
    "indent": ["error", 2],
    "quotes": ["error", "single"],
    "semi": ["error", "never"],
    "no-console": "off",
    "no-unused-vars": ["warn", {
      "argsIgnorePattern": "^_"
    }]
  },
  "globals": {
    "wx": "readonly",
    "App": "readonly",
    "Page": "readonly",
    "Component": "readonly",
    "getApp": "readonly",
    "getCurrentPages": "readonly"
  }
}
```

---

## ğŸ“¦ Git æäº¤è§„èŒƒ

### æäº¤ä¿¡æ¯æ ¼å¼

```bash
<type>(<scope>): <subject>

<body>

<footer>
```

### Type ç±»å‹

```bash
feat:     æ–°åŠŸèƒ½
fix:      ä¿®å¤ Bug
docs:     æ–‡æ¡£æ›´æ–°
style:    ä»£ç æ ¼å¼ï¼ˆä¸å½±å“ä»£ç è¿è¡Œï¼‰
refactor: é‡æ„ï¼ˆæ—¢ä¸æ˜¯æ–°åŠŸèƒ½ï¼Œä¹Ÿä¸æ˜¯ä¿®å¤ Bugï¼‰
perf:     æ€§èƒ½ä¼˜åŒ–
test:     æ·»åŠ æµ‹è¯•
chore:    æ„å»ºè¿‡ç¨‹æˆ–è¾…åŠ©å·¥å…·å˜åŠ¨
```

### Scope èŒƒå›´ï¼ˆé¡¹ç›®ç‰¹å®šï¼‰

```bash
candidate:  å€™é€‰äººç›¸å…³
anchor:     ä¸»æ’­ç›¸å…³
hr:         HR ç›¸å…³
agent:      ç»çºªäººç›¸å…³
operations: è¿è¥ç›¸å…³
admin:      ç®¡ç†å‘˜ç›¸å…³
scout:      æ˜Ÿæ¢ç›¸å…³
auth:       è®¤è¯ç™»å½•
cloud:      äº‘å‡½æ•°
utils:      å·¥å…·å‡½æ•°
docs:       æ–‡æ¡£
```

### ç¤ºä¾‹

```bash
# å¥½çš„æäº¤ä¿¡æ¯
feat(candidate): æ·»åŠ å€™é€‰äººæŠ¥åè¡¨å•
fix(auth): ä¿®å¤å¾®ä¿¡æˆæƒå¤±è´¥çš„é—®é¢˜
docs(dev): æ›´æ–° Dev Docs ä½¿ç”¨è¯´æ˜
refactor(cloud): é‡æ„ç”¨æˆ·ä¿¡æ¯æŸ¥è¯¢äº‘å‡½æ•°

# ä¸å¥½çš„æäº¤ä¿¡æ¯
update code
fix bug
ä¿®æ”¹æ–‡ä»¶
```

---

## ğŸ”— ç›¸å…³æ–‡æ¡£

- [å¾®ä¿¡å°ç¨‹åºå¼€å‘è§„èŒƒ Skill](../../../.claude/skills/miniprogram-dev/SKILL.md) - è¯¦ç»†çš„å°ç¨‹åºå¼€å‘æ ‡å‡†
- [å…¨å±€å¼€å‘æŒ‡å—](../../CLAUDE.md) - é€šç”¨å¼€å‘å“²å­¦
- [é¡¹ç›®çŸ¥è¯†åº“](../../PROJECT_KNOWLEDGE.md) - ç³»ç»Ÿæ¶æ„å’Œæ ¸å¿ƒæ¦‚å¿µ
- [é—®é¢˜æ’æŸ¥æŒ‡å—](../../TROUBLESHOOTING.md) - å¸¸è§é—®é¢˜å’Œè§£å†³æ–¹æ¡ˆ

---

**æœ€åæ›´æ–°**: 2025-11-05
**ç»´æŠ¤è€…**: å¼€å‘å›¢é˜Ÿ

> ğŸ’¡ ä»£ç è§„èŒƒæ˜¯å›¢é˜Ÿåä½œçš„åŸºç¡€ã€‚è¯¦ç»†çš„æŠ€æœ¯è§„èŒƒè¯·å‚è€ƒå¯¹åº”çš„ Skillï¼Œå®ƒä»¬ä¼šåœ¨éœ€è¦æ—¶è‡ªåŠ¨æ¿€æ´»ã€‚
